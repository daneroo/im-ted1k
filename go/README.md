# Go port for im-ted1k

- Loop every second
- Take a measurement from serial port
- Store to the database

## TODO
- move getDB to startLoop(creds)
- `.netrc` still required for vgo based build (GitHub API token)
- Reorganize this document (vgo,docker,..)
    - vgo and vscode (with `vendor/` and `$GOPATH`)
- Integrate into `go-ted1k` repo.
- `vgo` pinned version for mysql driver

## References
For discussion of serial port access, see [this article](http://reprage.com/post/using-golang-to-connect-raspberrypi-and-arduino/).
And try to use:

- good https://github.com/tarm/serial
- previous https://github.com/tarm/goserial
- old fork of above https://github.com/huin/goserial
- also: https://github.com/edartuz/go-serial

## Docker
```
docker build -t capture:latest .
docker run --rm -it --name capture capture:latest
```

This is a way to build and extract the executable (capture) from the container without starting it:
```
docker build -t capture:latest .
docker create --name capture capture:latest
docker cp capture:/capture ./capture-linux-amd64
docker rm capture
scp -p capture-linux-amd64  daniel@euler:Code/iMetrical/im-ted1k/
```

### Skip Analysis
```
docker run --rm -it mysql bash
mysql -h euler.imetrical.com ted -e 'select concat(left(stamp,18),"0") as pertensec,count(*) from watt where stamp>DATE_SUB(NOW(), INTERVAL 3 minute) group by pertensec'
mysql -h euler.imetrical.com ted -e 'select concat(left(stamp,16),":00") as permin,count(*) from watt where stamp>DATE_SUB(NOW(), INTERVAL 15 minute) group by permin'

2018-03-29T00:42:48.6026Z - warning: skipping entry |raw|=1 |decoded|=0
2018-03-29T00:42:48.6027Z - raw: n:1 raw[:n]:"\x10"
2018-03-29T00:42:49.1004Z - warning: skipping entry |raw|=282 |decoded|=279
2018-03-29T00:42:49.1005Z - raw: n:282 raw[:n]:"\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xda\x04\xe0\x00a\x04Q\xb0\x05B?\x032\x00g\x05T\x00\xa7m\x10\x10\x00\xda\xf9\x1a\x00\x83\x84\x00\x00\xae\xb7\xf7\x02\x97\xab\xce\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03\xdb\x00\r\x00\xc1\x04\x83\x02!\x03B\x04\x04\xc5\r\x02\x00\x00\x00\x00\x00$Pj\x00\x00\x00\x00\x00\x1c\x02\x10\x03"

2018-03-29T00:53:48.1418Z - 2018-03-29T00:53:48 watts: 2130 volts: 121.5
2018-03-29T00:53:49.6274Z - warning: skipping entry |raw|=1 |decoded|=0
2018-03-29T00:53:49.6275Z - raw: n:1 raw[:n]:"\x10"
2018-03-29T00:53:50.1006Z - warning: skipping entry |raw|=282 |decoded|=279
2018-03-29T00:53:50.1008Z - raw: n:282 raw[:n]:"\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xda\x04\xe0\x00a\x04Q\xb0\x05B?\x032\x00g\x05T\x00$\xa6\x10\x10\x00\x9cV\x1b\x00\x8e\x84\x00\x00p\x14\xf8\x02\x14\xe4\xce\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03\xd8\x00\r\x00\xbf\x04\x83\x02!\x03B\x04\x04y\f\x02\x00\x00\x00\x00\x00l\x1aj\x00\x00\x00\x00\x00\x1c\x02\x10\x03"
2018-03-29T00:53:51.1001Z - 2018-03-29T00:53:51 watts: 2160 volts: 121.2
2018-03-29T00:53:52.7205Z - warning: skipping entry |raw|=1 |decoded|=0
2018-03-29T00:53:52.7205Z - raw: n:1 raw[:n]:"\x10"
2018-03-29T00:53:53.1001Z - warning: skipping entry |raw|=282 |decoded|=279
2018-03-29T00:53:53.1003Z - raw: n:282 raw[:n]:"\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xda\x04\xe0\x00a\x04Q\xb0\x05B?\x032\x00g\x05T\x00G\xab\x10\x10\x00\f_\x1b\x00\x8f\x84\x00\x00\xe0\x1c\xf8\x027\xe9\xce\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03\xd6\x00\r\x00\xbe\x04\x83\x02!\x03B\x04\x04R\a\x02\x00\x00\x00\x00\x00D\xffi\x00\x00\x00\x00\x00\x1c\x02\x10\x03"
2018-03-29T00:53:54.1001Z - 2018-03-29T00:53:54 watts: 2140 volts: 121.5


2018-03-29T00:54:42.6413Z - raw: n:1 raw[:n]:"\x10"
2018-03-29T00:54:43.1001Z - warning: skipping entry |raw|=282 |decoded|=279
2018-03-29T00:54:43.1003Z - raw: n:282 raw[:n]:"\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xda\x04\xe0\x00a\x04Q\xb0\x05B?\x032\x00g\x05T\x00G\xab\x10\x10\x00\f_\x1b\x00\x8f\x84\x00\x00\xe0\x1c\xf8\x027\xe9\xce\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03\xd6\x00\r\x00\xbf\x04\x83\x02!\x03B\x04\x04\xdc\x06\x02\x00\x00\x00\x00\x00\xac\"j\x00\x00\x00\x00\x00\x1c\x02\x10\x03"
2018-03-29T00:54:44.1001Z - 2018-03-29T00:54:44 watts: 2140 volts: 121.5

2018-03-29T00:57:53.1334Z - 2018-03-29T00:57:53 watts: 2140 volts: 121.7
2018-03-29T00:57:54.6604Z - warning: skipping entry |raw|=2 |decoded|=0
2018-03-29T00:57:54.6605Z - raw: n:2 raw[:n]:"\x10\x04"
2018-03-29T00:57:55.1002Z - 2018-03-29T00:57:55 watts: 2150 volts: 121.7
2018-03-29T00:57:56.1349Z - 2018-03-29T00:57:56 watts: 2170 volts: 121.8
2018-03-29T00:57:57.6795Z - warning: skipping entry |raw|=1 |decoded|=0
2018-03-29T00:57:57.6795Z - raw: n:1 raw[:n]:"\x10"
2018-03-29T00:57:58.1002Z - warning: skipping entry |raw|=282 |decoded|=279
2018-03-29T00:57:58.1003Z - raw: n:282 raw[:n]:"\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xda\x04\xe0\x00a\x04Q\xb0\x05B?\x032\x00g\x05T\x00\x9f\xbf\x10\x10\x00t\x80\x1b\x00\x93\x84\x00\x00H>\xf8\x02\x8f\xfd\xce\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03\xd9\x00\r\x00\xc0\x04\x83\x02!\x03B\x04\x04\f\r\x02\x00\x00\x00\x00\x00\f4j\x00\x00\x00\x00\x00\x1c\x02\x10\x03"
2018-03-29T00:57:59.1001Z - 2018-03-29T00:57:59 watts: 2160 volts: 121.6

2018-03-29T02:40:11.1420Z - 2018-03-29T02:40:11 watts: 1650 volts: 122.0
2018-03-29T02:40:12.1436Z - warning: skipping entry |raw|=219 |decoded|=217
2018-03-29T02:40:12.1437Z - raw: n:219 raw[:n]:"\x10\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xa5\x05\xc6\x03a\x04Q\xb0\x05B?\x032\x00g\x05T\x00\x01\x17\x13\x00\xb6X\x1f\x00\xf9\x84\x00\x00\x8a\x16\xfc\x02\xf1T\xd1\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01"
2018-03-29T02:40:13.1002Z - 2018-03-29T02:40:13 watts: 1650 volts: 122.0

2018-03-29T03:00:11.1368Z - 2018-03-29T03:00:11 watts: 1140 volts: 122.2
2018-03-29T03:00:12.1432Z - warning: skipping entry |raw|=176 |decoded|=174
2018-03-29T03:00:12.1433Z - raw: n:176 raw[:n]:"\x10\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xa5\x05\xc6\x03a\x04Q\xb0\x05B?\x032\x00g\x05T\x00\x12h\x13\x00\xd3\xdd\x1f\x00\r\x85\x00\x00\xa7\x9b\xfc\x02\x02\xa6\xd1\x01"
2018-03-29T03:00:13.1002Z - 2018-03-29T03:00:13 watts: 1140 volts: 122.2

2018-03-29T03:04:11.1456Z - 2018-03-29T03:04:11 watts: 1540 volts: 122.1
2018-03-29T03:04:12.1462Z - warning: skipping entry |raw|=256 |decoded|=254
2018-03-29T03:04:12.1463Z - raw: n:256 raw[:n]:"\x10\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xa5\x05\xc6\x03a\x04Q\xb0\x05B?\x032\x00g\x05T\x00\xb5u\x13\x007\xf4\x1f\x00\x11\x85\x00\x00\v\xb2\xfc\x02\xa5\xb3\xd1\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03\x9a\x00\t\x00\xc5\x04\x86"
2018-03-29T03:04:13.1001Z - 2018-03-29T03:04:13 watts: 1540 volts: 122.1

2018-03-29T04:07:23.1001Z - warning: skipping entry |raw|=317 |decoded|=268
2018-03-29T04:07:23.1002Z - raw: n:317 raw[:n]:"v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03b\x00\x05\x00\xd2\x04\x88\x02$\x03F\x04\x04b\xed\x00\x00\x00\x00\x00\x00&\xc5k\x00\x00\x00\x00\x00\x1c\x02\x10\x03\x10\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xa5\x05\xc6\x03a\x04Q\xb0\x05B?\x032\x00g\x05T\x00Z\x10\x10\x15\x00\x83\x96\"\x00P\x85\x00\x00WT\xff\x02JN\xd3\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03b\x00\x05\x00\xd3\x04\x88\x02$\x03F\x04\x04\xeb\xea\x00\x00\x00\x00\x00\x00\x10"
panic: Unknown escape byte cf

2018-03-29T05:00:26.1002Z - warning: skipping entry |raw|=239 |decoded|=104
2018-03-29T05:00:26.1002Z - raw: n:239 raw[:n]:"\x032\x00g\x05T\x00t\x8f\x15\x007g#\x00\x85\x85\x00\x00\v%\x00\x03d\xcd\xd3\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03i\x00\x06\x00\xcb\x04\x89\x02#\x03F\x04\x04\xb0\xfc\x00\x00\x00\x00\x00\x00\xa0!k\x00\x00\x00\x00\x00\x1c\x02\x10\x03\x10\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05"
2018-03-29T05:00:27.1002Z - warning: skipping entry |raw|=355 |decoded|=177
2018-03-29T05:00:27.1003Z - raw: n:355 raw[:n]:"\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xa5\x05\xc6\x03a\x04Q\xb0\x05B?\x032\x00g\x05T\x00t\x8f\x15\x007g#\x00\x85\x85\x00\x00\v%\x00\x03d\xcd\xd3\x01\x06z\t\xea\x04\xd5\x03{\t0\x04;\x03|\t\x91\x04\x8c\x03\x81\t\xa1\x04\x99\x03\x82\t\xac\x04\xa2\x03\x83\t\xd3\x03\xee\x02r\x81\xd0\x01\xa4\x01s\t\xa9\x01\x8c\x01t\t\xe6\x03\xfe\x02u\t\xb0\x03\xd2\x02v\t\x8b\x04\x87\x03w\t\xb1\x04\xa6\x03h\x00\x06\x00\xcb\x04\x89\x02#\x03F\x04\x04\x83\xfd\x00\x00\x00\x00\x00\x00\b'k\x00\x00\x00\x00\x00\x1c\x02\x10\x03\x10\x04\x1a\x02\xc3\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x00\x1d\x01\x00\x00\x84\x03\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1c\x02\xdd\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x05\x00\xe8\x03\x00\xd3\x00\x00TED \x00\x00\x00\x00\x00\xb7\v\x0f'\x0f'\x0f'\xe8\x03\xdc\x05\x97\x04\xd4\x02\xa5\x05\xc6\x03a\x04Q\xb0\x05B?\x032\x00g\x05T\x00t\x8f\x15\x007g#\x00\x85\x85\x00\x00\v%\x00\x03d\xcd\xd3\x01\x06z\t"


```
## Vendoring - vgo and hellogopher
- [hellogopher](https://github.com/cloudflare/hellogopher)
- [vgo-tour (usage)](https://research.swtch.com/vgo-tour)
Install vgo
```
go get -u golang.org/x/vgo
```

This is to allow vscode to see vendor'd directory:
```
.vscode:   "go.gopath": "/Users/daniellauzon/Code/iMetrical/im-ted1k/go/.GOPATH"

vgo vendor
```

Just build:
```
vgo build ./cmd/capture
```

Just test:
```
vgo test -v ./cmd/capture/ ./ted1k/
```

Cross compiling for linux
```
GOOS=linux GOARCH=amd64 vgo build ./cmd/capture
```

The system I had was using `govend`: `vendor.yml`, `vendor/`
- I added an import comment to `main.go:` 
```
package main // import "github.com/daneroo/im-ted1k/go"
```
- running `vgo build` produces a go.mod file.
- I then replaced the vgo require for tarm/serial to match the govend vendored copy. (which I can update later)
```
// actual time: 2015-11-13T21:30:10Z
require "github.com/tarm/serial" v0.0.0-20151113213010-edb665337295
```

## Docker dev
For dev in docker, mounting local directory, and cwd to /usr/src/ted1k

cd go
docker run -it --rm --privileged -v /dev:/hostdev -v `pwd`:/usr/src/ted1k -w /usr/src/ted1k  golang


see [this](https://docs.python.org/2/library/struct.html) to decode python format in ted.py

    _protocol_len = 278

    # Offset,  name,             fmt,     scale
    (82,       'kw_rate',        "<H",    0.0001),
    (108,      'house_code',     "<B",    1),
    (247,      'kw',             "<H",    0.01),
    (251,      'volts',          "<H",    0.1),

